<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pega-Pega</title>

    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: rgb(49, 48, 48);
            overflow:hidden;
        }
        #gameArea {
            position: relative;
            width: 1000px;
            height: 800px;
            background-color: rgb(0, 0, 0);
            border: 2px solid rgb(114, 113, 113);
            border-radius: 10px;
        }
        .player {
            position: absolute;
            width: 120px;
            height: 25gpx;
            border-radius: 10px;
            background-image: url("awp-azul.png");
            top: 100px;
            left: 150px;
            background-size: cover;
            
        }
        .goal {
            position:absolute;
            width: 100px;
            height: 20px;
            border-radius: 10px;
            background-image: url("awp-vermelha.png");
            top: 650px;
            left: 750px;
            background-size: cover;
            
        }
        .obstacle {
            position: absolute;
            width: 40px;
            height: 65px;
            background-image: url("granada.png");
            background-size: cover;
            
        }
        .obstacle1 {
            top: 100px;
            left: 50px;
        }
        .obstacle2 {
            top: 400px;
            left: 700px;
        }
        .obstacle3 {
            top: 600px;
            left: 375px;
        }
    </style>
</head>
<body>
    <div id="gameArea">
        <div class="player" id="player"></div>
        <div class="goal"></div>
        <div class="obstacle obstacle1"></div>
        <div class="obstacle obstacle2"></div>
        <div class="obstacle obstacle3"></div>
    </div>
    <script>
        const player = document.getElementById("player");
        const goal = document.querySelector (".goal");
        const obstacles = document.querySelectorAll (".obstacle");
        const step = 20; // Distância que o personagem se move
        let posX = 180, posY = 180;
        let gameOver = false;

        function checkColision (x,y) {
            const playerWidth = player.offsetWidth;
            const playerHeight = player.offsetHeight;
            
            for (let obstacle of obstacles) {
                let obsX = obstacle.offsetLeft;
                let obsY = obstacle.offsetTop;
                let obsWidth = obstacle.offsetWidth;
                let obsHeight = obstacle.offsetHeight;
                if (x < obsX + obsWidth && x + playerWidth > obsX && y < obsY + obsHeight && y + playerHeight > obsY) {
                    return true;
                }
            }
            return false;
        }

        function checkWin () {
            let goalX = goal.offsetLeft;
            let goalY = goal.offsetTop;
            if (posX < goalX + 40 && posX + 40 > goalX && posY < goalY + 40 && posY + 40 > goalY) {
                alert ("PARABÉNS!!!");
                gameOver = true;
            }
        }


        document.addEventListener("keydown", (event )=>{
            if (gameOver) return;
            let newX = posX
            let newY = posY
            if (event.key === "ArrowUp" && posY > 0) newY -= step;
            if (event.key === "ArrowDown" && posY > 0) newY += step;
            if (event.key === "ArrowLeft" && posX > 0) newX -= step;
            if (event.key === "ArrowRight" && posX > 0) newX += step;
            if (!checkColision(newX, newY)) {
                posX = newX;
                posY = newY;
                player.style.top = posY + "px";
                player.style.left = posX + "px";
            }
            checkWin ();
            
        });
    </script>
</body>
</html>